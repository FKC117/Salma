<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Natural Language Python Sandbox - Reference</title>
    <link rel="stylesheet" href="../css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fpythonsan3478back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">
    <!-- Natural Language Sandbox Toolbar -->
    <div class="toolbar bg-gray-800 border-b border-gray-700 px-4 py-2">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-emerald-500 rounded flex items-center justify-center">
                        <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                    </div>
                    <div>
                        <h1 class="text-lg font-semibold text-gray-100">Natural Language Python Sandbox</h1>
                        <p class="text-xs text-gray-400">AI-Powered Code Generation</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-2 border-l border-gray-600 pl-4">
                    <button id="clearChatBtn" class="px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-500 transition-colors">
                        Clear Chat
                    </button>
                    <button id="toggleSidebarBtn" class="px-3 py-1.5 bg-purple-600 text-white text-sm rounded hover:bg-purple-500 transition-colors">
                        üìä Datasets
                    </button>
                </div>
            </div>
            
            <div class="flex items-center space-x-2 text-sm text-gray-400">
                <div class="w-2 h-2 bg-emerald-500 rounded-full"></div>
                <span>AI Assistant Ready</span>
            </div>
        </div>
    </div>

    <!-- Main Layout Container -->
    <div class="flex h-screen overflow-hidden">
        <!-- Dataset Sidebar -->
        <div id="datasetSidebar" class="w-80 bg-gray-800 border-r border-gray-700 flex flex-col transition-all duration-300 flex-shrink-0">
            <!-- Sidebar Header -->
            <div class="px-4 py-3 border-b border-gray-700 flex-shrink-0">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold text-gray-100">üìä Datasets</h2>
                    <button id="closeSidebarBtn" class="text-gray-400 hover:text-white">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Dataset Upload -->
            <div class="px-4 py-3 border-b border-gray-700 flex-shrink-0">
                <button id="uploadDatasetBtn" class="w-full px-3 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-500 transition-colors">
                    üìÅ Load Dataset
                </button>
                <input type="file" id="datasetFileInput" accept=".csv,.json,.xlsx" class="hidden" />
            </div>

            <!-- Dataset List -->
            <div class="flex-1 overflow-y-auto min-h-0">
                <div class="px-4 py-2">
                    <h3 class="text-sm font-medium text-gray-300 mb-2">Available Datasets</h3>
                    <div id="datasetList" class="space-y-2">
                        <!-- Datasets will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Dataset Preview -->
            <div id="datasetPreview" class="px-4 py-3 border-t border-gray-700 max-h-80 overflow-y-auto hidden flex-shrink-0">
                <h3 class="text-sm font-medium text-gray-300 mb-2">Dataset Preview</h3>
                <div id="previewContent" class="text-xs overflow-hidden"></div>
            </div>
        </div>

        <!-- Chat Interface Container -->
        <div class="flex-1 flex flex-col overflow-hidden min-w-0">
            <!-- Chat Messages Container -->
            <div class="flex-1 overflow-y-auto p-4 min-h-0">
                <div id="chatContainer" class="space-y-4 max-w-full">
                    <!-- Welcome message -->
                    <div class="bg-gray-800 border border-gray-700 rounded-lg p-4">
                        <div class="flex items-start space-x-3">
                            <div class="w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center flex-shrink-0">
                                <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z"/>
                                </svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="font-medium text-emerald-400 mb-2">AI Assistant</div>
                                <div class="text-gray-300">
                                    Welcome to the Natural Language Python Sandbox! Ask me anything about your data in plain English, like:
                                    <ul class="mt-2 space-y-1 text-sm text-gray-400 list-disc list-inside">
                                        <li>"Show me the correlation between sales and profit"</li>
                                        <li>"Create a bar chart of monthly revenue"</li>
                                        <li>"Filter data where age is greater than 25"</li>
                                        <li>"Calculate the mean temperature by city"</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="border-t border-gray-700 bg-gray-800 p-4 flex-shrink-0">
                <div class="flex items-end space-x-3">
                    <div class="flex-1 min-w-0">
                        <textarea id="messageInput" placeholder="Ask me anything about your data in natural language, or write Python code directly..." class="w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-gray-100 placeholder-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent" rows="3"></textarea>
                        <div id="inputDetection" class="text-xs text-gray-500 mt-1 hidden">
                            <span id="detectionText"></span>
                        </div>
                    </div>
                    <button id="sendBtn" class="px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-500 transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 self-stretch flex-shrink-0">
                        <span id="btnText">Ask</span>
                        <svg id="sendIcon" class="w-4 h-4 ml-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- This is a reference file - the actual implementation will be in natural_language_sandbox.html -->
    <script>
        console.log('This is the reference template for Natural Language Python Sandbox');
        console.log('The actual implementation will be created as a Django template');
    </script>
</body>
</html>
